<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>The Olympic Journey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wdth,wght@0,75..100,300..800;1,75..100,300..800&display=swap"
        rel="stylesheet">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Open Sans', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        * {
            box-sizing: border-box;
        }

        #sidebar {
            position: absolute;
            top: 80px;
            bottom: 0;
            right: 0;
            width: 100%;
            overflow: hidden;
            z-index: 1;
            background-color: rgb(0, 0, 0, 0.6);
            /* blur the background */
            backdrop-filter: blur(5px);
        }

        .map {
            position: absolute;
            height: 100%;
            width: 100%;
        }

        a {
            color: #404040;
            text-decoration: none;
        }

        a:hover {
            color: #101010;
        }

        .title-bar {
            position: absolute;
            padding: 8px;
            color: #fff;
            width: 100%;
            z-index: 1;
            display: inline;
        }

        .title-bar-back {
            background-color: rgb(0 0 0 / 60%)
        }

        /* create a toggle switch from .title-bar .menu  */
        #toggle {
            position: absolute;
            /* top: 10px; */
            /* left: 10px; */
            width: 20px;
            /* height: 30px; */
            margin: 16px 8px;
        }

        #toggle div {
            width: 100%;
            height: 3px;
            background: white;
            margin: 6px auto;
            transition: all 0.3s;
            backface-visibility: hidden;
        }

        #toggle.on .one {
            transform: rotate(45deg) translate(5px, 5px);
        }

        #toggle.on .two {
            opacity: 0;
        }

        #toggle.on .three {
            transform: rotate(-45deg) translate(7px, -8px);
        }

        #menu {
            color: white;
            border: 1px solid white;
            width: 150px;
            height: 100px;
            padding: 10px;
            border-radius: 3px;
            font-family: "Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Bitstream Vera Sans", "Trebuchet MS", Verdana, "Verdana Ref", sans-serif;
            line-height: 100px;
            text-align: center;
            margin: auto;
            display: none;
        }

        .title-bar .share {
            position: fixed;
            top: 24px;
            right: 20px;
        }

        .title-bar h1 {
            font-family: "Open Sans", sans-serif;
            font-size: 1.25em;
            font-optical-sizing: auto;
            font-weight: 700;
            font-style: italic;
            font-variation-settings:
                "wdth" 75;
            text-transform: uppercase;
            margin: 0;
            line-height: 20px;
            padding: 20px 2px;
            text-align: center;
        }

        .detail-bar {
            position: absolute;
            top: 74px;
            background: rgb(0, 0, 0, 0.6);
            color: #fff;
            width: 96%;
            z-index: 1;
            margin: 8px;
            padding: 16px 18px;
            font-size: 14px;
            margin-bottom: 10px;
            max-height: 400px;
            overflow-y: scroll;
        }

        .poster {
            float: left;
            margin-right: 8px;
            max-width: 72px;
        }

        .detail-bar .close {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .detail-bar .year h3 {
            font-weight: 300;
            font-variation-settings:
                "wdth" 75;
            text-transform: uppercase;
            line-height: 0.5em;
        }

        .detail-bar .city h3 {
            font-weight: 700;
            font-variation-settings:
                "wdth" 100;
            line-height: 0;
        }

        .detail-bar #expand {
            font-weight: 700;
            text-align: center;
        }

        .listings {
            height: 100%;
            overflow-y: scroll;
            padding-bottom: 80px;
        }

        .listings .item {
            display: block;
            /* border-bottom: 1px solid #eee; */
            padding: 10px;
            text-decoration: none;
            font-size: 0.75em;
            color: #fff;
        }

        .listings .item:last-child {
            border-bottom: none;
        }

        .listings .item .year {
            display: inline;
            color: #FEB710;
            font-weight: 800;
            font-style: italic;
        }

        .listings .item .city {
            display: inline;
            color: #ffffff;
            font-weight: 700;
        }

        .listings .item.active {
            background-color: rgb(0, 0, 0, 0.6)
        }

        ::-webkit-scrollbar {
            width: 3px;
            height: 3px;
            border-left: 0;
            background: rgb(0 0 0 / 10%);
        }

        ::-webkit-scrollbar-track {
            background: none;
        }

        ::-webkit-scrollbar-thumb {
            background: #03094d;
            border-radius: 0;
        }

        /* Marker tweaks */
        .mapboxgl-popup {
            padding-bottom: 60px;
        }

        .mapboxgl-popup-close-button {
            display: none;
        }

        .mapboxgl-popup-content {
            font:
                400 15px/22px 'Open Sans',
                'Helvetica Neue',
                sans-serif;
            padding: 0;
            width: 180px;
            border-radius: 10px;
        }

        .mapboxgl-popup-content h3 {
            background: #050848;
            color: #fff;
            margin: 0;
            padding: 10px;
            border-radius: 10px 10px 0 0;
            font-weight: 700;
            margin-top: -15px;
        }

        .mapboxgl-popup-content h4 {
            margin: 0;
            padding: 10px;
            font-weight: 400;
        }

        .mapboxgl-popup-content div {
            padding: 10px;
        }

        .mapboxgl-popup-anchor-top>.mapboxgl-popup-content {
            margin-top: 15px;
        }

        .mapboxgl-popup-anchor-top>.mapboxgl-popup-tip {
            border-bottom-color: #fff;
        }
    </style>
</head>

<body>
    <div class="title-bar">
        <div class="title-bar-back">
            <!-- insert a toggle switch  -->
            <div id="toggle">
                <div class="one"></div>
                <div class="two"></div>
                <div class="three"></div>
            </div>

            <h1>The Olympic Journey</h1>
            <img src="./olympics/img/share.svg" alt="menu" class="share">
        </div>
    </div>

    <div class="detail-bar" style="display: none;">Details</div>
    <div id="sidebar" style="display:none">
        <div id="listings" class="listings"></div>
    </div>
    <div id="map" class="map"></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZ3JhZmEiLCJhIjoiY2ptYjNtZWxnMDBrdDNwbnVicGJzOWg2NyJ9.9OulyCe3kEqMAXPbx1mKUA';

        /**
         * Add the map to the page
         */
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/grafa/clvcti9gb00ue01rjhg1n7y5d',
            center: [-77.034084142948, 38.909671288923],
            zoom: 1,
            scrollZoom: true
        });

        const summerVenues = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            23.717,
                            37.967
                        ]
                    },
                    "properties": {
                        "Year": "1896",
                        "City": "Athens",
                        "Country": "Greece üá¨üá∑",
                        "Times_Hosted": 2,
                        "Season": "S",
                        "Summary": "The 1896 Athens Games successfully revived the Olympic tradition after 1,500 years, overcoming challenges to host an iconic first edition of the modern Olympics.",
                        "Details": "<h3 id='venues'>Venues</h3><ul><li>Panathenaic Stadium (athletics, wrestling)</li><li>Neo Phaliron Velodrome (cycling) </li><li>Zappeion (fencing)</li><li>Open water venues for swimming events</li></ul><h3 id='participatingcountries'>Participating Countries</h3><ul><li>14 nations participated, with 241 athletes (all male)</li><li>Over 65% of athletes were from Greece</li></ul><h3 id='notableathletes'>Notable Athletes</h3><ul><li>Spyridon Louis (Greece) - Won the marathon, becoming a national hero</li><li>Alfr√©d Haj√≥s (Hungary) - Won swimming events in freezing open water</li><li>James Connolly (USA) - First Olympic champion in over 1,500 years (triple jump)</li><li>Carl Schuhmann (Germany) - Most successful athlete with 4 wrestling/gymnastics wins</li></ul><h3 id='newsports'>New Sports</h3><ul><li>None, but swimming events were held in open water for the first time</li></ul><h3 id='innovations'>Innovations</h3><ul><li>First modern Olympic marathon race</li><li>Thomas Burke (USA) used a crouching start in sprint races</li></ul><h3 id='controversies'>Controversies</h3><ul><li>None major, though some uncertainty over exact athlete numbers</li></ul><h3 id='worldevents'>World Events</h3><ul><li>Greece had recently gained independence and hosted to affirm nationhood</li><li>Financial troubles and political instability initially threatened the Games</li></ul><h3 id='othernotes'>Other Notes</h3><ul><li>Winners received silver medals, runners-up copper (later amended to gold/silver/bronze)</li><li>Olympic theme song debuted</li><li>Torch relay inaugurated, snaking through Athens streets</li></ul>",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ibebbeb35a8c282b4/version/1678041382/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            2.351,
                            48.857
                        ]
                    },
                    "properties": {
                        "Year": "1900",
                        "City": "Paris",
                        "Country": "France üá´üá∑",
                        "Times_Hosted": 2,
                        "Season": "S",
                        "Summary": "The 1900 Paris Exposition took place across several venues spanning 543 acres (216 hectares). The Exposition celebrated the achievements and progress of the 19th century, showcasing France as a major colonial power through pavilions at the Trocad√©ro. It took place during a period of economic growth and optimism known as the Belle √âpoque era in France.",
                        "Details": "<h3 id='numberofparticipatingcountries'>Number of Participating Countries</h3><ul><li>40 countries participated with national pavilions[2]</li><li>Over 83,000 exhibitors from around the world[1]</li></ul><h3 id='notableathletes'>Notable Athletes</h3><ul><li>Alvin Kraenzlein (USA) - Won 4 athletics events (60m, 110m hurdles, 200m hurdles, long jump)[5]</li><li>The first female Olympic athletes competed, including Mrs. Brohy and Miss Ohnier of France in croquet[5]</li></ul><h3 id='notablefashion'>Notable Fashion</h3><ul><li>Art Nouveau style was prominently featured, with displays by Ren√© Lalique, Gaillard, Guimard, Charpentier and others[1]</li></ul><h3 id='themesong'>Theme Song</h3><p>No specific theme song is mentioned.</p><h3 id='recordsbroken'>Records Broken</h3><p>No major world records are cited, though it showcased many technological innovations and feats of engineering.[1][3]</p><h3 id='newsportsintroduced'>New Sports Introduced</h3><p>The 1900 Paris games were the first Olympics with women's events, including croquet.[5]</p><h3 id='innovations'>Innovations</h3><ul><li>Grande Roue de Paris (giant Ferris wheel) </li><li>Moving sidewalks</li><li>Escalators</li><li>Diesel engines</li><li>Talking films</li><li>Telegraphone (magnetic audio recorder)</li><li>First regular passenger trolleybus line[1][3]</li></ul><h3 id='controversies'>Controversies</h3><p>No major controversies are mentioned.</p><h3 id='worldevents'>World Events</h3><p>The Exposition celebrated the achievements and progress of the 19th century, showcasing France as a major colonial power through pavilions at the Trocad√©ro.[3] It took place during a period of economic growth and optimism known as the Belle √âpoque era in France.[2]</p>",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i22ccd639204c6c0b/version/1678041369/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -90.198,
                            38.627
                        ]
                    },
                    "properties": {
                        "Year": "1904",
                        "City": "St. Louis",
                        "Country": "United States üá∫üá∏",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "The 1904 Summer Olympics were held in St. Louis, Missouri, United States from July 1 to November 23, 1904, as part of the Louisiana Purchase Exposition (also known as the St. Louis World's Fair).",
                        "Details": "<h3 id='venues'>Venues</h3><ul><li>Francis Olympic Field (athletics, gymnastics, wrestling, etc.)</li><li>Francis Gymnasium (boxing, fencing)  </li><li>Forest Park (swimming, diving, water polo)</li><li>Creve Coeur Lake (rowing)</li><li>Glen Echo Country Club (golf)</li></ul><h3 id='participatingcountries'>Participating Countries</h3><p>Only 12 countries sent athletes, with 645 men and 6 women competing. The vast majority (526) were from the United States.[2]</p><h3 id='notableathletes'>Notable Athletes</h3><ul><li>George Eyser (USA) - won 6 gymnastics medals despite having a wooden leg</li><li>Ray Ewry (USA) - won 8 athletics medals </li><li>Thomas Kiely (Ireland) - won decathlon gold medal[3]</li></ul><h3 id='newsports'>New Sports</h3><p>Boxing, decathlon, and freestyle wrestling made their Olympic debuts.[2]</p><h3 id='recordsbroken'>Records Broken</h3><p>No world records were officially recognized, as Olympic records were not kept until 1912.[3]</p><h3 id='controversies'>Controversies</h3><ul><li>Anthropology exhibits displayed people from Philippines, Arctic, etc. in recreated villages.[1]</li><li>Many events combined U.S. national championships with Olympic championships due to lack of international entries.[2]</li></ul><h3 id='worldevents'>World Events</h3><p>The Russo-Japanese War limited European participation in the Games.[2][3]</p><p>The 1904 St. Louis Olympics were historically significant as the first Olympic Games held outside Europe, but were marred by poor organization and low international presence.[2][3]</p><p>Citations:[1] https://www.theatlantic.com/photo/2019/09/the-1904-st-louis-worlds-fair-photos/597658/[2] https://en.wikipedia.org/wiki/1904<em>Summer</em>Olympics[3] https://www.britannica.com/event/St-Louis-1904-Olympic-Games[4] https://www.loc.gov/item/2007633932/[5] https://www.slam.org/teachers-students/educator-resource/art-on-display/1904-st-louis-worlds-fair/</p>",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=136x10000:format=png/path/s293f5a94d3403280/image/ic30b9e00d12ff5b6/version/1678041355/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -0.123,
                            51.507
                        ]
                    },
                    "properties": {
                        "Year": "1908",
                        "City": "London",
                        "Country": "England üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø",
                        "Times_Hosted": 3,
                        "Season": "S",
                        "Summary": "The 1908 Summer Olympics were held in London, England from April 27 to October 31, 1908.",
                        "Details": "<h3 id='venues'>Venues</h3><ul><li>White City Stadium was built specifically for the Games and hosted the opening ceremony, athletics, gymnastics, and other events. It had a capacity of 68,000.[2]</li><li>Other venues included Bisley Ranges (shooting), Franco-British Exhibition (fencing), and Knightsbridge (figure skating).[2]</li></ul><h3 id='participatingcountries'>Participating Countries</h3><ul><li>22 countries participated, with around 2,000 athletes (1,971 men and 37 women).[2]</li></ul><h3 id='notableathletes'>Notable Athletes</h3><ul><li>Dorando Pietri of Italy collapsed near the finish of the marathon but was helped across the line first, before being disqualified for receiving aid. He was awarded a special cup by Queen Alexandra.[3]</li><li>John Taylor of Great Britain won three gold medals in swimming events.[3]</li></ul><h3 id='fashion'>Fashion</h3><ul><li>No notable fashion trends are mentioned in the sources.</li></ul><h3 id='themesong'>Theme Song</h3><ul><li>The sources do not mention an official theme song.</li></ul><h3 id='recordsbroken'>Records Broken</h3><ul><li>The sources do not provide details on specific records broken.</li></ul><h3 id='newsports'>New Sports</h3><ul><li>Diving, motorboating, indoor tennis, and field hockey were introduced as new Olympic sports.[3]</li></ul><h3 id='innovations'>Innovations</h3><ul><li>It was the first Olympic Games to have an official opening ceremony.[4]</li></ul><h3 id='controversies'>Controversies</h3><ul><li>The Finnish team protested by refusing to march behind the Russian flag due to Russian rule over Finland.[3][4]</li><li>Many Irish athletes boycotted the Games as subjects of the British crown.[3][4] </li><li>American athlete Ralph Rose refused to dip the U.S. flag to King Edward VII, starting a tradition.[3][4]</li><li>Disputes arose between American and British officials over track events like the 400m final.[3][4]</li></ul><h3 id='worldevents'>World Events</h3><ul><li>The 1906 eruption of Mount Vesuvius caused the Games to be relocated from Rome to London due to financial constraints in Italy.[2][5]</li></ul><p>Citations:[1] https://en.wikipedia.org/wiki/1908<em>in</em>the<em>United</em>Kingdom[2] https://en.wikipedia.org/wiki/1908<em>Summer</em>Olympics[3] https://www.britannica.com/event/London-1908-Olympic-Games[4] https://www.britannica.com/sports/Olympic-Games/London-England-1908[5] https://www.insidethegames.biz/articles/3391/1908-london</p>",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=140x10000:format=png/path/s293f5a94d3403280/image/ifd2e95b215e6028b/version/1678041336/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            18.068,
                            59.329
                        ]
                    },
                    "properties": {
                        "Year": "1912",
                        "City": "Stockholm",
                        "Country": "Sweden üá∏üá™",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=152x10000:format=png/path/s293f5a94d3403280/image/i328f7fbb3d84ddd1/version/1678041323/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            4.4,
                            51.217
                        ]
                    },
                    "properties": {
                        "Year": "1920",
                        "City": "Antwerp",
                        "Country": "Belgium üáßüá™",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i01e09f47553f7bc1/version/1678041281/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            4.9,
                            52.367
                        ]
                    },
                    "properties": {
                        "Year": "1928",
                        "City": "Amsterdam",
                        "Country": "Netherlands üá≥üá±",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i18eff07c1abb2d97/version/1678041212/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -118.25,
                            34.05
                        ]
                    },
                    "properties": {
                        "Year": "1932",
                        "City": "Los Angeles",
                        "Country": "United States üá∫üá∏",
                        "Times_Hosted": 2,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i2917d7c9b19424af/version/1678041186/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            13.383,
                            52.517
                        ]
                    },
                    "properties": {
                        "Year": "1936",
                        "City": "Berlin",
                        "Country": "Germany üá©üá™",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ice3b1f621af162bf/version/1678041161/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            24.938,
                            60.171
                        ]
                    },
                    "properties": {
                        "Year": "1952",
                        "City": "Helsinki",
                        "Country": "Finland üá´üáÆ",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ic87e32fe2fd4dca9/version/1678041014/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            144.963,
                            -37.814
                        ]
                    },
                    "properties": {
                        "Year": "1956",
                        "City": "Melbourne",
                        "Country": "Australia üá¶üá∫",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ia6c24e1c572615d5/version/1678040961/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            12.5,
                            41.9
                        ]
                    },
                    "properties": {
                        "Year": "1960",
                        "City": "Rome",
                        "Country": "Italy üáÆüáπ",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i5b75a0fc41e3b25d/version/1678040931/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            139.683,
                            35.683
                        ]
                    },
                    "properties": {
                        "Year": "1964",
                        "City": "Tokyo",
                        "Country": "Japan üáØüáµ",
                        "Times_Hosted": 2,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=123x10000:format=png/path/s293f5a94d3403280/image/i32405b868c58e6f3/version/1678040893/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -99.133,
                            19.433
                        ]
                    },
                    "properties": {
                        "Year": "1968",
                        "City": "Mexico City",
                        "Country": "Mexico üá≤üáΩ",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i7b583b47a67e05de/version/1678040864/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            11.567,
                            48.133
                        ]
                    },
                    "properties": {
                        "Year": "1972",
                        "City": "Munich",
                        "Country": "West Germany üá©üá™",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i91de4dc42b8962c9/version/1678040831/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -73.567,
                            45.502
                        ]
                    },
                    "properties": {
                        "Year": "1976",
                        "City": "Montreal",
                        "Country": "Canada üá®üá¶",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i4e89c0014c5192e9/version/1678040795/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            37.615,
                            55.75
                        ]
                    },
                    "properties": {
                        "Year": "1980",
                        "City": "Moscow",
                        "Country": "USSR üá∑üá∫",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i1ca2c77942bd5238/version/1678040756/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            126.967,
                            37.567
                        ]
                    },
                    "properties": {
                        "Year": "1988",
                        "City": "Seoul",
                        "Country": "South Korea üá∞üá∑",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i3bf65532f0a62810/version/1678040685/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            2.183,
                            41.383
                        ]
                    },
                    "properties": {
                        "Year": "1992",
                        "City": "Barcelona",
                        "Country": "Spain üá™üá∏",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i90daa0442cede026/version/1678040655/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -84.39,
                            33.755
                        ]
                    },
                    "properties": {
                        "Year": "1996",
                        "City": "Atlanta",
                        "Country": "United States üá∫üá∏",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i2ffeb81adc677bd9/version/1678040538/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            151.21,
                            -33.865
                        ]
                    },
                    "properties": {
                        "Year": "2000",
                        "City": "Sydney",
                        "Country": "Australia üá¶üá∫",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ia400b343d16c4bbc/version/1678040510/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            116.38,
                            39.917
                        ]
                    },
                    "properties": {
                        "Year": "2008",
                        "City": "Beijing",
                        "Country": "China üá®üá≥",
                        "Times_Hosted": 2,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/id6da11388975fbaa/version/1678040450/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -43.173,
                            -22.907
                        ]
                    },
                    "properties": {
                        "Year": "2016",
                        "City": "Rio de Janeiro",
                        "Country": "Brazil üáßüá∑",
                        "Times_Hosted": 1,
                        "Season": "S",
                        "Summary": "",
                        "Details": "",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=jpg/path/s293f5a94d3403280/image/i4d7405d5d15b89d5/version/1678040226/image.jpg"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            2.35611,
                            48.8682
                        ]
                    },
                    "properties": {
                        "Year": "2024",
                        "City": "Paris",
                        "Country": "France üá´üá∑",
                        "Times_Hosted": 2,
                        "Season": "S",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "./olympics/img/2024-france.png"
                    }
                },
            ]
        };

        const winterVenues = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            6.87,
                            45.923
                        ]
                    },
                    "properties": {
                        "Year": "1924",
                        "City": "Chamonix",
                        "Country": "France üá´üá∑",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/iea94e04661f1a820/version/1678041264/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            9.833,
                            46.5
                        ]
                    },
                    "properties": {
                        "Year": "1928",
                        "City": "St. Moritz",
                        "Country": "Switzerland üá®üá≠",
                        "Times_Hosted": 2,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=142x10000:format=png/path/s293f5a94d3403280/image/ia61dc0ad97d38f27/version/1678041229/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -73.985,
                            44.286
                        ]
                    },
                    "properties": {
                        "Year": "1932",
                        "City": "Lake Placid",
                        "Country": "United States üá∫üá∏",
                        "Times_Hosted": 2,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/idf93b9256de506ec/version/1678041200/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            11.15,
                            47.5
                        ]
                    },
                    "properties": {
                        "Year": "1936",
                        "City": "Garmisch-Partenkirchen",
                        "Country": "Germany üá©üá™",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i675f3afaaabcb919/version/1678041174/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            10.75,
                            59.95
                        ]
                    },
                    "properties": {
                        "Year": "1952",
                        "City": "Oslo",
                        "Country": "Norway üá≥üá¥",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i647cfa8ec34780e4/version/1678041030/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            12.133,
                            46.533
                        ]
                    },
                    "properties": {
                        "Year": "1956",
                        "City": "Cortina",
                        "Country": "Italy üáÆüáπ",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i4a0c4c4f3517dd49/version/1678040995/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -120.235,
                            39.196
                        ]
                    },
                    "properties": {
                        "Year": "1960",
                        "City": "Squaw Valley",
                        "Country": "United States üá∫üá∏",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ie8994374d685f94a/version/1678040944/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            11.383,
                            47.267
                        ]
                    },
                    "properties": {
                        "Year": "1964",
                        "City": "Innsbruck",
                        "Country": "Austria üá¶üáπ",
                        "Times_Hosted": 2,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i1e51f97f7f8a1ac2/version/1678040810/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            5.722,
                            45.2
                        ]
                    },
                    "properties": {
                        "Year": "1968",
                        "City": "Grenoble",
                        "Country": "France üá´üá∑",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i39b21367ea7e7151/version/1678040880/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            141.35,
                            43.067
                        ]
                    },
                    "properties": {
                        "Year": "1972",
                        "City": "Sapporo",
                        "Country": "Japan üáØüáµ",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i3635415c3aa552b3/version/1678040846/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            18.417,
                            43.867
                        ]
                    },
                    "properties": {
                        "Year": "1984",
                        "City": "Sarajevo",
                        "Country": "Yugoslavia",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=123x10000:format=png/path/s293f5a94d3403280/image/i6e9ee3cd9b13ce0b/version/1678040742/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -114.071,
                            51.049
                        ]
                    },
                    "properties": {
                        "Year": "1988",
                        "City": "Calgary",
                        "Country": "Canada üá®üá¶",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i4189cb627cfe1568/version/1678040701/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            6.393,
                            45.678
                        ]
                    },
                    "properties": {
                        "Year": "1992",
                        "City": "Albertville",
                        "Country": "France üá´üá∑",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i5f920adeccaa4f2f/version/1678040669/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            10.433,
                            61.13
                        ]
                    },
                    "properties": {
                        "Year": "1994",
                        "City": "Lillehammer",
                        "Country": "Norway üá≥üá¥",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/if6897192859168fa/version/1678040551/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            138.1,
                            36.25
                        ]
                    },
                    "properties": {
                        "Year": "1998",
                        "City": "Nagano",
                        "Country": "Japan üáØüáµ",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ib16302976a8c7aff/version/1678040524/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -111.88,
                            40.75
                        ]
                    },
                    "properties": {
                        "Year": "2002",
                        "City": "Salt Lake City",
                        "Country": "United States üá∫üá∏",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/id6ded27d5049e78f/version/1678040497/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            7.7,
                            45.067
                        ]
                    },
                    "properties": {
                        "Year": "2006",
                        "City": "Turin",
                        "Country": "Italy üáÆüáπ",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ib77eddcd0ca99b66/version/1678040466/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            -123.121,
                            49.283
                        ]
                    },
                    "properties": {
                        "Year": "2010",
                        "City": "Vancouver",
                        "Country": "Canada üá®üá¶",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/ia3b78df67903e42f/version/1678040429/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            39.72,
                            43.585
                        ]
                    },
                    "properties": {
                        "Year": "2014",
                        "City": "Sochi",
                        "Country": "Russia üá∑üá∫",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i80a4f96e2bf47420/version/1678040253/image.png"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            128.4,
                            37.367
                        ]
                    },
                    "properties": {
                        "Year": "2018",
                        "City": "Pyeongchang",
                        "Country": "South Korea üá∞üá∑",
                        "Times_Hosted": 1,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=jpg/path/s293f5a94d3403280/image/i7e2263e7f371720f/version/1678040211/image.jpg"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [
                            116.38,
                            39.917
                        ]
                    },
                    "properties": {
                        "Year": "2022",
                        "City": "Beijing",
                        "Country": "China üá®üá≥",
                        "Times_Hosted": 2,
                        "Season": "W",
                        "Details": "The 1896 Summer Olympics, officially known as the Games of the I Olympiad, were held in Athens, Greece from April 6-15, 1896. Here are the key facts about these inaugural modern Olympic Games.",
                        "Image": "https://image.jimcdn.com/app/cms/image/transf/dimension=156x10000:format=png/path/s293f5a94d3403280/image/i167eea9ce554ff40/version/1678040150/image.png"
                    }
                }]
        };
        /**
         * Assign a unique id to each venue. You'll use this `id`
         * later to associate each point on the map with a listing
         * in the sidebar.
         */
        summerVenues.features.forEach((summerVenue, i) => {
            summerVenue.properties.id = i;
        });
        winterVenues.features.forEach((winterVenue, i) => {
            winterVenue.properties.id = i;
        });

        /**
         * Wait until the map loads to make changes to the map.
         */
        map.on('load', () => {
            // make sidebar listings
            buildLocationList(summerVenues);
            buildLocationList(winterVenues);
            // add source and layer for venues
            map.addSource('summer_venues', {
                type: 'geojson',
                data: summerVenues,
                cluster: true,
                clusterMaxZoom: 14, // Max zoom to cluster points on
                clusterRadius: 50, // Radius of each cluster when clustering points (defaults to 50)
                generateId: true
            });
            map.addSource('winter_venues', {
                type: 'geojson',
                data: winterVenues,
                cluster: true,
                clusterMaxZoom: 14, // Max zoom to cluster points on
                clusterRadius: 50, // Radius of each cluster when clustering points (defaults to 50)
                generateId: true
            });

            // +++++++++++++ SUMMER VENUES +++++++++++++
            // add the layers for the clusters and unclustered points
            map.addLayer({
                id: 'summer_clusters',
                type: 'circle',
                source: 'summer_venues',
                filter: ['all', ['>', 'point_count', 0]],
                paint: {
                    'circle-color': '#FEB710',
                    'circle-radius': [
                        'step',
                        ['get', 'point_count'],
                        8,
                        1,
                        16,
                        3,
                        24
                    ],
                    'circle-stroke-width': 2,
                    'circle-stroke-color': '#000'
                }
            });
            // add the unclustered points layer
            map.addLayer({
                id: 'summer_unclustered_points',
                type: 'symbol',
                source: 'summer_venues',
                // create a filter that will hide the clusters and only show the points
                filter: ['!', ['has', 'point_count']],
                layout: {
                    'icon-image': 'summer_marker',
                    'icon-size': 0.5,
                    'icon-allow-overlap': true
                }
            });
            // add a label layer for the clusters
            map.addLayer({
                id: 'summer_cluster_count',
                type: 'symbol',
                source: 'summer_venues',
                filter: ['has', 'point_count'],
                layout: {
                    'text-field': '{point_count_abbreviated}',
                    'text-font': ['Arial Unicode MS Bold', 'DIN Offc Pro Medium'],
                    'text-size': 12
                }
            });
            // add a listener for the click event on the clusters to expand the cluster and zoom in
            map.on('click', 'summer_clusters', (e) => {
                const features = map.queryRenderedFeatures(e.point, {
                    layers: ['summer_clusters']
                });
                const clusterId = features[0].properties.cluster_id;
                map.getSource('summer_venues').getClusterExpansionZoom(clusterId, (err, zoom) => {
                    if (err) return;
                    map.easeTo({
                        center: features[0].geometry.coordinates,
                        zoom: zoom
                    });
                });
            });

            // +++++++++++++ WINTER VENUES +++++++++++++
            // add the layers for the clusters and unclustered points
            map.addLayer({
                id: 'winter_clusters',
                type: 'circle',
                source: 'winter_venues',
                filter: ['all', ['>', 'point_count', 0]],
                paint: {
                    'circle-color': '#3BC4FF',
                    'circle-radius': [
                        'step',
                        ['get', 'point_count'],
                        8,
                        1,
                        16,
                        3,
                        24
                    ],
                    'circle-stroke-width': 2,
                    'circle-stroke-color': '#000'
                }
            });
            // add the unclustered points layer
            map.addLayer({
                id: 'winter_unclustered_points',
                type: 'symbol',
                source: 'winter_venues',
                // create a filter that will hide the clusters and only show the points
                filter: ['!', ['has', 'point_count']],
                layout: {
                    'icon-image': 'winter_marker',
                    'icon-size': 0.5,
                    'icon-allow-overlap': true
                }
            });
            // add a label layer for the clusters
            map.addLayer({
                id: 'winter_cluster_count',
                type: 'symbol',
                source: 'winter_venues',
                filter: ['has', 'point_count'],
                layout: {
                    'text-field': '{point_count_abbreviated}',
                    'text-font': ['Arial Unicode MS Bold', 'DIN Offc Pro Medium'],
                    'text-size': 12
                }
            });
            // add a listener for the click event on the clusters to expand the cluster and zoom in
            map.on('click', 'winter_clusters', (e) => {
                const features = map.queryRenderedFeatures(e.point, {
                    layers: ['winter_clusters']
                });
                const clusterId = features[0].properties.cluster_id;
                map.getSource('winter_venues').getClusterExpansionZoom(clusterId, (err, zoom) => {
                    if (err) return;
                    map.easeTo({
                        center: features[0].geometry.coordinates,
                        zoom: zoom
                    });
                });
            });

            // add a listener for the click event on the unclustered points to display a popup
            map.on('click', 'summer_unclustered_points', (e) => {
                const coordinates = e.features[0].geometry.coordinates.slice();
                const { Year, City, Country, Summary, Image, Details } = e.features[0].properties;
                // const details = e.features[0].properties.Details;
                const description = `
                    <img src='./olympics/img/close.svg' class='close' onclick='closeDetails()'/>
                    <img src='${Image}' class='poster' />
                    <span class='year'><h3>${Year}</h3></span>
                    <span class='city'><h3>${City}, ${Country}</h3></span>
                    <p>${Summary}</p>
                    <div id='expand' onclick='expandDetails()'>EXPAND ‚åÑ</div>
                    <div id='details' style='display:none'>${Details}</div>`;
                // add the description to the details container
                // display the details container
                document.querySelector('.detail-bar').style.display = 'block';
                document.querySelector('.detail-bar').innerHTML = description;
            });
            map.on('click', 'winter_unclustered_points', (e) => {
                const coordinates = e.features[0].geometry.coordinates.slice();
                const { Year, City, Country, Summary, Image, Details } = e.features[0].properties;
                // const details = e.features[0].properties.Details;
                const description = `
                    <img src='./olympics/img/close.svg' class='close' onclick='closeDetails()'/>
                    <img src='${Image}' class='poster' />
                    <span class='year'><h3>${Year}</h3></span>
                    <span class='city'><h3>${City}, ${Country}</h3></span>
                    <p>${Summary}</p>
                    <div id='expand' onclick='expandDetails()'>EXPAND ‚åÑ</div>
                    <div id='details' style='display:none'>${Details}</div>`;
                // add the description to the details container
                // display the details container
                document.querySelector('.detail-bar').style.display = 'block';
                document.querySelector('.detail-bar').innerHTML = description;
            });
            spinGlobe();
        });

        /**
         * Add a listing for each venue to the sidebar.
         **/
        function buildLocationList(season) {
            for (const venue of season.features) {
                /* Add a new listing section to the sidebar. */
                const listings = document.getElementById('listings');
                const listing = listings.appendChild(document.createElement('a'));
                /* Assign a unique `id` to the listing. */
                
                /* Assign the `item` class to each listing for styling. */
                listing.className = 'item';
                listing.href = '#';
                listing.id = `listing-${venue.properties.id}`;

                /* Add the year to the individual listing created above. */
                const year = listing.appendChild(document.createElement('p'));
                year.className = 'year';
                year.innerHTML = `${venue.properties.Year}` + ' ';
                
                const city = listing.appendChild(document.createElement('p'));
                city.className = 'city';
                city.innerHTML += `${venue.properties.City}` + ', ' + `${venue.properties.Country}`;

                
                /**
                 * Listen to the element and when it is clicked, do four things:
                 * 1. Update the `currentFeature` to the venue associated with the clicked link
                 * 2. Fly to the point
                 * 3. Close all other popups and display popup for clicked venue
                 * 4. Highlight listing in sidebar (and remove highlight for all other listings)
                 **/
                listing.addEventListener('click', function () {
                    for (const feature of season.features) {
                        if (this.id === `listing-${feature.properties.id}`) {
                            flyToVenue(feature);
                            // open the details for the clicked venue
                            const { Year, City, Country, Summary, Image, Details } = feature.properties;
                            const description = `
                                <img src='./olympics/img/close.svg' class='close' onclick='closeDetails()'/>
                                <img src='${Image}' class='poster' />
                                <span class='year'><h3>${Year}</h3></span>
                                <span class='city'><h3>${City}, ${Country}</h3></span>
                                <p>${Summary}</p>
                                <div id='expand' onclick='expandDetails()'>EXPAND ‚åÑ</div>
                                <div id='details' style='display:none'>${Details}</div>`;
                            // add the description to the details container
                            // display the details container
                            document.querySelector('.detail-bar').style.display = 'block';
                            document.querySelector('.detail-bar').innerHTML = description;

                        }
                    }

                    const activeItem = document.getElementsByClassName('active');
                    if (activeItem[0]) {
                        activeItem[0].classList.remove('active');
                    }
                    this.parentNode.classList.add('active');
                    // hide the sidebar and toggle menu back
                    document.getElementById('sidebar').style.display = 'none';
                    document.getElementById('toggle').classList.remove('on');
                    
                });
            }
        }

        /**
         * Use Mapbox GL JS's `flyTo` to move the camera smoothly
         * a given center point.
         **/
        function flyToVenue(currentFeature) {
            map.flyTo({
                center: currentFeature.geometry.coordinates,
                zoom: 14,
                pitch: 60
            });
        }

        // control visibility of details

        // create a function that expands the details-bar when clicked
        const expandDetails = () => {
            document.getElementById('details').style.display = 'block';
        }

        const closeDetails = () => {
            // document.getElementById('details').style.display = 'none';
            document.querySelector('.detail-bar').style.display = 'none';
        }

        // spin globe 
        // At low zooms, complete a revolution every two minutes.
        const secondsPerRevolution = 120;
        // Above zoom level 5, do not rotate.
        const maxSpinZoom = 5;
        // Rotate at intermediate speeds between zoom levels 3 and 5.
        const slowSpinZoom = 3;

        let userInteracting = false;
        let spinEnabled = true;

        function spinGlobe() {
            const zoom = map.getZoom();
            if (spinEnabled && !userInteracting && zoom < maxSpinZoom) {
                let distancePerSecond = 360 / secondsPerRevolution;
                if (zoom > slowSpinZoom) {
                    // Slow spinning at higher zooms
                    const zoomDif =
                        (maxSpinZoom - zoom) / (maxSpinZoom - slowSpinZoom);
                    distancePerSecond *= zoomDif;
                }
                const center = map.getCenter();
                center.lng -= distancePerSecond;
                // Smoothly animate the map over one second.
                // When this animation is complete, it calls a 'moveend' event.
                map.easeTo({ center, duration: 1000, easing: (n) => n });
            }
        }
        // Pause spinning on interaction
        map.on('mousedown', () => {
            userInteracting = true;
            spinEnabled = false;
        });
        document.getElementById('toggle').addEventListener('click', function () {
            this.classList.toggle('on');
            const menu = document.getElementById('sidebar');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        });
    </script>
</body>

</html>